<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Design · Documentation | Jugsaw</title><script data-outdated-warner src="../assets/warner.js"></script><link rel="canonical" href="https://Jugsaw.github.io/Jugsaw.jl/design/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.png" alt="Documentation | Jugsaw logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">Documentation | Jugsaw</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../get-started/">Get Started</a></li><li><span class="tocitem">Clients</span><ul><li><a class="tocitem" href="../client/">Jugsaw Client (Julia)</a></li></ul></li><li><span class="tocitem">Jugsaw Developer</span><ul><li><a class="tocitem" href="../man/Jugsaw/">Jugsaw</a></li><li><a class="tocitem" href="../man/JugsawIR/">Jugsaw IR</a></li><li class="is-active"><a class="tocitem" href>Design</a><ul class="internal"><li><a class="tocitem" href="#Overview"><span>Overview</span></a></li><li><a class="tocitem" href="#The-Problem-We-Want-to-Solve"><span>The Problem We Want to Solve</span></a></li><li><a class="tocitem" href="#Existing-Solutions"><span>Existing Solutions</span></a></li><li><a class="tocitem" href="#Proposed-Solution"><span>Proposed Solution</span></a></li><li><a class="tocitem" href="#Comparison-with-Other-Products"><span>Comparison with Other Products</span></a></li><li><a class="tocitem" href="#FAQ"><span>FAQ</span></a></li><li><a class="tocitem" href="#References"><span>References</span></a></li></ul></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Jugsaw Developer</a></li><li class="is-active"><a href>Design</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Design</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/Jugsaw/Jugsaw.jl/blob/main/docs/src/design.md#" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Design"><a class="docs-heading-anchor" href="#Design">Design</a><a id="Design-1"></a><a class="docs-heading-anchor-permalink" href="#Design" title="Permalink"></a></h1><p><img src="../assets/workflow.png" alt/></p><h2 id="Overview"><a class="docs-heading-anchor" href="#Overview">Overview</a><a id="Overview-1"></a><a class="docs-heading-anchor-permalink" href="#Overview" title="Permalink"></a></h2><p>&lt;!–</p><ul><li>What Jugsaw is</li><li>What we provide<ul><li>For application developers<ul><li>Bridge the gap between users and developers?</li></ul></li><li>For general users<ul><li>A world of ready-to-use applications?</li></ul></li></ul></li></ul><p>–&gt;</p><h2 id="The-Problem-We-Want-to-Solve"><a class="docs-heading-anchor" href="#The-Problem-We-Want-to-Solve">The Problem We Want to Solve</a><a id="The-Problem-We-Want-to-Solve-1"></a><a class="docs-heading-anchor-permalink" href="#The-Problem-We-Want-to-Solve" title="Permalink"></a></h2><h3 id="A-Common-Case"><a class="docs-heading-anchor" href="#A-Common-Case">A Common Case</a><a id="A-Common-Case-1"></a><a class="docs-heading-anchor-permalink" href="#A-Common-Case" title="Permalink"></a></h3><p>A typical open source scientific computing problem solving workflow includes</p><ol><li>A developer releases an open software on Github.</li><li>Users know his package from the publications, conferences or friends. (*)</li><li>Users download the open source code from <strong>Git</strong> or some package management system (e.g. Julia package management system *).</li><li>User <strong>deploy</strong> the environment on their local host and test the software, (*)</li><li>Sometimes, uses need to learn a new language like Julia (*).</li><li>User <strong>deploy</strong> the environment on a cluster/EC2, which typically runs Linux system (*).Fact: all top 500 clusters run linux system, over 90% EC2 ship linux system (*).</li><li><strong>User use slurm system to submit serial/multi-threading/MPI/GPU tasks (*).</strong></li><li>Download the data from the cluster/EC2 to local host for analysing.</li></ol><h3 id="The-Scope-of-the-Problem-We-Want-to-Solve"><a class="docs-heading-anchor" href="#The-Scope-of-the-Problem-We-Want-to-Solve">The Scope of the Problem We Want to Solve</a><a id="The-Scope-of-the-Problem-We-Want-to-Solve-1"></a><a class="docs-heading-anchor-permalink" href="#The-Scope-of-the-Problem-We-Want-to-Solve" title="Permalink"></a></h3><ul><li>Domains/Subjects</li><li>Programming Languages</li></ul><h2 id="Existing-Solutions"><a class="docs-heading-anchor" href="#Existing-Solutions">Existing Solutions</a><a id="Existing-Solutions-1"></a><a class="docs-heading-anchor-permalink" href="#Existing-Solutions" title="Permalink"></a></h2><p>TODO: list the pros and cons of each existing solution.</p><ul><li>PyCall.jl/PythonCall.jl</li><li>HuggingFace</li><li>Stipple.jl</li></ul><h2 id="Proposed-Solution"><a class="docs-heading-anchor" href="#Proposed-Solution">Proposed Solution</a><a id="Proposed-Solution-1"></a><a class="docs-heading-anchor-permalink" href="#Proposed-Solution" title="Permalink"></a></h2><h3 id="Key-Concepts"><a class="docs-heading-anchor" href="#Key-Concepts">Key Concepts</a><a id="Key-Concepts-1"></a><a class="docs-heading-anchor-permalink" href="#Key-Concepts" title="Permalink"></a></h3><h4 id="Contributor"><a class="docs-heading-anchor" href="#Contributor">Contributor</a><a id="Contributor-1"></a><a class="docs-heading-anchor-permalink" href="#Contributor" title="Permalink"></a></h4><p>Contributors are those who are familiar with a specific library. They can develop applications with the help of <a href="#Jugsaw-SDK">Jugsaw SDK</a> and deploy them on our app store.</p><h4 id="User"><a class="docs-heading-anchor" href="#User">User</a><a id="User-1"></a><a class="docs-heading-anchor-permalink" href="#User" title="Permalink"></a></h4><p>Different from <a href="@ref"><strong>Contributor</strong></a>, general users do not need to understand all the underlying implementation details.</p><p>For entry level users, they are more interested in interacting with the <a href="@ref"><strong>Application</strong></a>s through the web portal. </p><p>For experienced users, they can take an <a href="#Application">Application</a> as a black box and reliably embed it in their own code logic. For some complex algorithms, they may even compose an arbitrary computation graph and schedule it on our cluster.</p><h4 id="Application"><a class="docs-heading-anchor" href="#Application">Application</a><a id="Application-1"></a><a class="docs-heading-anchor-permalink" href="#Application" title="Permalink"></a></h4><p>An application is usually a collection of <a href="#Jug">Jug</a>s or <a href="#Saw">Saw</a>s which share the same runtime environment. <a href="@ref">Developer</a>s can specify the required resources to run the application. Our system may automatically create several instances based on the number of queueing requests.</p><h4 id="Job"><a class="docs-heading-anchor" href="#Job">Job</a><a id="Job-1"></a><a class="docs-heading-anchor-permalink" href="#Job" title="Permalink"></a></h4><p>To initiate the computation, <a href="#User">User</a>s need to submit a <strong>Job</strong> either through SDK or on the web portal.</p><p>A job describes the target <a href="@ref"><code>Jug</code></a>/<a href="@ref"><code>Saw</code></a> and corresponding arguments.</p><pre><code class="language-json hljs">{
    &quot;target&quot;: {
        &quot;app&quot;: &quot;hello-world&quot;,
        &quot;method&quot;: &quot;greet&quot;
    },
    &quot;arguments&quot;: [
        &quot;world&quot;
    ]
}</code></pre><p>The result of an job is a <a href="#Future">Future</a>.</p><h4 id="Jug"><a class="docs-heading-anchor" href="#Jug">Jug</a><a id="Jug-1"></a><a class="docs-heading-anchor-permalink" href="#Jug" title="Permalink"></a></h4><p>A <strong>Jug</strong> is a stateful computation unit. Each Jug is associated with a unique id.</p><h4 id="Saw"><a class="docs-heading-anchor" href="#Saw">Saw</a><a id="Saw-1"></a><a class="docs-heading-anchor-permalink" href="#Saw" title="Permalink"></a></h4><p>A <strong>Saw</strong> is a stateless computation unit. Unlike <a href="#Jug">Jug</a>, there&#39;s no id associated with it.</p><h4 id="Data-Model"><a class="docs-heading-anchor" href="#Data-Model">Data Model</a><a id="Data-Model-1"></a><a class="docs-heading-anchor-permalink" href="#Data-Model" title="Permalink"></a></h4><h4 id="Future"><a class="docs-heading-anchor" href="#Future">Future</a><a id="Future-1"></a><a class="docs-heading-anchor-permalink" href="#Future" title="Permalink"></a></h4><p>A <strong>Future</strong> in Jugsaw is similar to the <code>Future</code> in Julia (or a kind of <code>AbstractRemoteRef</code> to be more specific). It is just an ID. Users can fetch the result from it with SDK.</p><h3 id="Core-Components"><a class="docs-heading-anchor" href="#Core-Components">Core Components</a><a id="Core-Components-1"></a><a class="docs-heading-anchor-permalink" href="#Core-Components" title="Permalink"></a></h3><p>TODO: Add images to explain how they are assembled in our product.</p><h4 id="Jugsaw-SDK"><a class="docs-heading-anchor" href="#Jugsaw-SDK">Jugsaw SDK</a><a id="Jugsaw-SDK-1"></a><a class="docs-heading-anchor-permalink" href="#Jugsaw-SDK" title="Permalink"></a></h4><p>For now we&#39;ll focus on the Julia SDK. But the ideas should also apply to SDK in other languages in the future.</p><p>Basically, the SDK contains two parts: the <strong>client</strong> side and the <strong>server</strong> side.</p><h5 id="Jugsaw-Server"><a class="docs-heading-anchor" href="#Jugsaw-Server">Jugsaw Server</a><a id="Jugsaw-Server-1"></a><a class="docs-heading-anchor-permalink" href="#Jugsaw-Server" title="Permalink"></a></h5><ul><li><a href="@ref"><code>Jug</code></a>/<a href="@ref"><code>Saw</code></a> manager<ul><li>(De)Activate Jug/Saw</li><li>Dispatch requests</li><li>State Monitoring</li></ul></li></ul><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>The manager is <strong>STATIC</strong> at the moment. This means that, once started, the manager can only handle requests to predefined <a href="#Jug">Jug</a>s or <a href="#Saw">Saw</a>s.</p></div></div><p><strong>Example:</strong></p><pre><code class="language-julia hljs"># app.jl

## Jug
greet(name::String=&quot;World&quot;)::String = &quot;Hello, $name!&quot;

## Saw
Base.@kwdef struct Counter
    name::String = greet()
    n::Ref{Int} = Ref(0)
end

(c::Counter)(x::Int=1)::String = c.n[] += x</code></pre><pre><code class="language-julia hljs"># manager.jl
using Jugsaw

register(Jug, greet)
register(Saw, Counter)

serve()</code></pre><pre><code class="language-yaml hljs"># config.yaml
- name: hello-world
- version: v0.1.0
- authors:
  - Alice
  - Bob</code></pre><h5 id="Jugsaw-Client"><a class="docs-heading-anchor" href="#Jugsaw-Client">Jugsaw Client</a><a id="Jugsaw-Client-1"></a><a class="docs-heading-anchor-permalink" href="#Jugsaw-Client" title="Permalink"></a></h5><ul><li>Submit job</li><li>Fetch data from <a href="@ref"><code>Future</code></a></li><li>(De)Serializer</li></ul><pre><code class="language-julia hljs">using Jugsaw

open(Client(endpoint=&quot;https://api.jugsaw.co&quot;), app=&quot;hello-world&quot;) do app
    # Saw
    msg = app.greet()
    println(msg[])

    # Jug
    counter = app.Counter()
    counter()
    counter(2)
    println(counter(3)[])

    # JugSaw
    x = app.Counter(name=app.greet())
    x()
    x(2)
    println(string(x)[])

    # Utils
    signature(app.greet)
    signature(app.count)
end</code></pre><h4 id="Jugsaw-Runtime"><a class="docs-heading-anchor" href="#Jugsaw-Runtime">Jugsaw Runtime</a><a id="Jugsaw-Runtime-1"></a><a class="docs-heading-anchor-permalink" href="#Jugsaw-Runtime" title="Permalink"></a></h4><ul><li>Scheduling</li><li>Auto-scaling</li></ul><h4 id="Jugsaw-Proto"><a class="docs-heading-anchor" href="#Jugsaw-Proto">Jugsaw Proto</a><a id="Jugsaw-Proto-1"></a><a class="docs-heading-anchor-permalink" href="#Jugsaw-Proto" title="Permalink"></a></h4><h4 id="Jugsaw-Frontend"><a class="docs-heading-anchor" href="#Jugsaw-Frontend">Jugsaw Frontend</a><a id="Jugsaw-Frontend-1"></a><a class="docs-heading-anchor-permalink" href="#Jugsaw-Frontend" title="Permalink"></a></h4><ul><li>Communication strategy</li><li>Embedding in other tools<ul><li>Jupyter Notebook</li><li>Pluto</li><li>Documenter.jl</li></ul></li></ul><h3 id="Key-Features"><a class="docs-heading-anchor" href="#Key-Features">Key Features</a><a id="Key-Features-1"></a><a class="docs-heading-anchor-permalink" href="#Key-Features" title="Permalink"></a></h3><h4 id="Pluggable"><a class="docs-heading-anchor" href="#Pluggable">Pluggable</a><a id="Pluggable-1"></a><a class="docs-heading-anchor-permalink" href="#Pluggable" title="Permalink"></a></h4><h3 id="The-Ecosystem-Around-Jugsaw"><a class="docs-heading-anchor" href="#The-Ecosystem-Around-Jugsaw">The Ecosystem Around Jugsaw</a><a id="The-Ecosystem-Around-Jugsaw-1"></a><a class="docs-heading-anchor-permalink" href="#The-Ecosystem-Around-Jugsaw" title="Permalink"></a></h3><h2 id="Comparison-with-Other-Products"><a class="docs-heading-anchor" href="#Comparison-with-Other-Products">Comparison with Other Products</a><a id="Comparison-with-Other-Products-1"></a><a class="docs-heading-anchor-permalink" href="#Comparison-with-Other-Products" title="Permalink"></a></h2><ul><li><a href="https://huggingface.co/spaces">HuggingFace Spaces</a></li><li><a href="https://replicate.com/">Replicate</a></li><li><a href="https://docs.ray.io/">Ray</a></li><li><a href="https://github.com/fonsp/Pluto.jl">Pluto</a></li></ul><h2 id="FAQ"><a class="docs-heading-anchor" href="#FAQ">FAQ</a><a id="FAQ-1"></a><a class="docs-heading-anchor-permalink" href="#FAQ" title="Permalink"></a></h2><h3 id="Why-do-You-Choose-to-Work-on-This-Field?"><a class="docs-heading-anchor" href="#Why-do-You-Choose-to-Work-on-This-Field?">Why do You Choose to Work on This Field?</a><a id="Why-do-You-Choose-to-Work-on-This-Field?-1"></a><a class="docs-heading-anchor-permalink" href="#Why-do-You-Choose-to-Work-on-This-Field?" title="Permalink"></a></h3><ul><li>Our aspiration</li><li>The potential market size</li></ul><h3 id="Why-**You**?"><a class="docs-heading-anchor" href="#Why-**You**?">Why <strong>You</strong>?</a><a id="Why-**You**?-1"></a><a class="docs-heading-anchor-permalink" href="#Why-**You**?" title="Permalink"></a></h3><h3 id="Why-Julia?"><a class="docs-heading-anchor" href="#Why-Julia?">Why Julia?</a><a id="Why-Julia?-1"></a><a class="docs-heading-anchor-permalink" href="#Why-Julia?" title="Permalink"></a></h3><h2 id="References"><a class="docs-heading-anchor" href="#References">References</a><a id="References-1"></a><a class="docs-heading-anchor-permalink" href="#References" title="Permalink"></a></h2><ul><li><a href="https://docs.google.com/document/d/1bYL-638GN6EeJ45dPuLiPImA8msojEDDKiBx3YzB4_s/preview#heading=h.ru1taexewu7i">Ray AIR Technical Whitepaper</a></li></ul></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../man/JugsawIR/">« Jugsaw IR</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.24 on <span class="colophon-date" title="Friday 5 May 2023 14:35">Friday 5 May 2023</span>. Using Julia version 1.8.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
